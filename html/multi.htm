<!DOCTYPE html>
<html>
<head>
<link rel="icon" type="image/gif" href="img/favicon.png" />
<link rel="stylesheet" type="text/css" href="style.css">
<title>piTemp</title>
<script src="../libraries/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="../libraries/RGraph.common.core.js" ></script>
<script src="../libraries/RGraph.common.effects.js" ></script>
<script src="../libraries/RGraph.thermometer.js" ></script>
<script type="text/javascript">													// Schalter initiieren 
var moehre = 0;		
thermometer = {};

function initGraph (json) {
thermometer[0] = new RGraph.Thermometer({id: 'g0', min: 0, max: 100, value: 0}).draw();
thermometer[1] = new RGraph.Thermometer({id: 'g1', min: 0, max: 400, value: 0}).draw();	
thermometer[2] = new RGraph.Thermometer({id: 'g2', min: 0, max: 100, value: 0}).draw();
thermometer[3] = new RGraph.Thermometer({id: 'g3', min: 0, max: 100, value: 0}).draw();		
thermometer[4] = new RGraph.Thermometer({id: 'g4', min: 0, max: 100, value: 0}).draw();
thermometer[5] = new RGraph.Thermometer({id: 'g5', min: 0, max: 100, value: 0}).draw();
thermometer[6] = new RGraph.Thermometer({id: 'g6', min: 0, max: 100, value: 0}).draw();
thermometer[7] = new RGraph.Thermometer({id: 'g7', min: 0, max: 100, value: 0}).draw();        	
}

function getData(){	
var data;
var jsonurl = './tnow.json';
$.ajax({
	type: "GET",
	url: jsonurl,	// Daten-Stream url
	data: data,	// Variable für json Container
	async: true,	
	dataType: "json",
	success: function(data){	// nur ausführen wenn getJson (hier ajax) erfolgreich war
	celsius = data.temperature_record;
	ausgeben();
	},
	error: function(){alert('Der Server antwortet nicht!');}
	});	
}	

function ausgeben () {
if (moehre == 8) {
	moehre = 0;
	getData();
	}
else {
	console.log(moehre);
	thermometer[moehre].value = celsius[moehre]; 
	thermometer[moehre].grow();
	moehre++;
	setTimeout(ausgeben, 100);
}
}	
</script>
</head>
<body>
<div id="container">
<img src="img/banner.png"/></a>
	<nav>
		<ul>
			<li><a href="single.htm">read temperature</a></li>
			<li><a href="multi.htm">read multi temperature</a></li>
			<li><a href="check.htm">config</a></li>
		</ul>
	</nav>
  <aside>
	<div id="buttons">
	</div>	
</aside>
<section id="content">
	<article>	
		<div id="log">	
		<canvas id="g0" width="80" height="300">[No canvas support]</canvas>
		<canvas id="g1" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g2" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g3" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g4" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g5" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g6" width="80" height="300">[No canvas support]</canvas> 
		<canvas id="g7" width="80" height="300">[No canvas support]</canvas> 
	</article>
  </section>
<footer>		
</footer>
</div>
<script>initGraph(); getData();</script>
	</body>
</html>
