<!DOCTYPE html>
<html>
<head>
<title>piTemp Konfiguration</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<link rel="stylesheet" type="text/css" href="style.css">
<script src="../libraries/jquery-1.8.3.min.js" type="text/javascript"></script>
		<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
		<script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
		<script type="text/javascript">
		
		var chart; // global chart variable

		// Get data from Pi NodeJS server
		function getData(){
			var datum = Date.now();
			$.getJSON('./tnow.json', function(data) {
            //alert(data.unix_time);
				// Create the series
				var series  = chart.series[0],
					shift = series.data.length > 20; // shift if the series longer than 20
				// Add the point
				chart.series[0].addPoint([datum, data.temperature_record[1]], true, shift);
				// Repeat this function call after 1 second
				setTimeout(getData, 2000);
				});
			}
	</script>

	<script type="text/javascript">
   // Configure the plot
	$(document).ready(function() {
	   chart = new Highcharts.Chart({
		chart: {
		    renderTo: 'gdiv',
		    defaultSeriesType: 'spline',
		    events: {
		        load: getData
		    }
		},
		title: {
		    text: 'Live View Temps'
		},
		xAxis: {
		    type: 'datetime',
		    tickPixelInterval: 150,
		    maxZoom: 20 * 1000,
		    title: {
			   text: 'Time (sensor called at one second intervals)',
			   margin: 15
			}
		},
		yAxis: {
		    minPadding: 0.2,
		    maxPadding: 0.2,
		    title: {
		        text: 'Temperature \u00B0C',
		        margin: 15
		    }
		},
		series: [{
		    name: 'Temp1',
		    data: []
		}]
	    });        
	});
	</script>	
</head>
<body>
<div id="container">
<img src="img/banner.png"/></a>
	<nav>
		<ul>
			<li><a href="multi.htm">view</a></li>
			<li><a href="plot.htm">graph</a></li>			
			<li><a href="plot2.htm">history</a></li>			
			<li><a href="config1.htm">config</a></li>
			<li><a href="config2.htm">config 2</a></li>
			<li><a href="bar.htm">barcode config</a></li>
		</ul>
	</nav>

	<section id="gdiv">
		<div id="graph" style="width: 100%; height: 400px"></div>
 	</section>
 <footer>		
 </footer>
</div>
</body>
</html>
